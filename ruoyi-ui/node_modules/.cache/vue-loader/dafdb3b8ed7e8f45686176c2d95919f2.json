{"remainingRequest":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\wb-vision-server\\ruoyi-ui\\src\\views\\system\\palace\\palace.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\wb-vision-server\\ruoyi-ui\\src\\views\\system\\palace\\palace.vue","mtime":1698223351996},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxpc3REZXNrLCBnZXREZXNrLCBkZWxEZXNrLCBhZGREZXNrLCB1cGRhdGVEZXNrLCBiaW5kRGV2aWNlLCB1bmJpbmREZXZpY2UgfSBmcm9tICJAL2FwaS9zeXN0ZW0vcGFsYWNlIjsKaW1wb3J0IHsgbGlzdERldmljZSB9IGZyb20gIkAvYXBpL3N5c3RlbS9kZXZpY2UiOwppbXBvcnQgeyBsaXN0Q2xhc3Nyb29tLCBnZXRDbGFzc3Jvb20sIGRlbENsYXNzcm9vbSwgYWRkQ2xhc3Nyb29tLCB1cGRhdGVDbGFzc3Jvb20gfSBmcm9tICJAL2FwaS9zeXN0ZW0vY2xhc3Nyb29tIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGVzayIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDpgInkuK3mlbDnu4QKICAgICAgaWRzOiBbXSwKICAgICAgLy8g6Z2e5Y2V5Liq56aB55SoCiAgICAgIHNpbmdsZTogdHJ1ZSwKICAgICAgLy8g6Z2e5aSa5Liq56aB55SoCiAgICAgIG11bHRpcGxlOiB0cnVlLAogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YKICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgLy8g5oC75p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDmoYzlrZDooajmoLzmlbDmja4KICAgICAgZGVza0xpc3Q6IFtdLAogICAgICBjbGFzc3Jvb21MaXN0OltdLAogICAgICBkZXZpY2VMaXN0OiBbXSwKICAgICAgLy8g5by55Ye65bGC5qCH6aKYCiAgICAgIHRpdGxlOiAiIiwKICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCCiAgICAgIG9wZW46IGZhbHNlLAogICAgICBiaW5kT3BlbjogZmFsc2UsCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIG5hbWU6IG51bGwsCiAgICAgICAgbm86IG51bGwsCiAgICAgICAgY2xhc3Nyb29tSWQ6IG51bGwsCiAgICAgICAgdHlwZTogbnVsbCwKICAgICAgICBjcmVhdGVVc2VySWQ6IG51bGwsCiAgICAgICAgdXBkYXRlVXNlcklkOiBudWxsCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7CiAgICAgICAgdHlwZTogMQogICAgICB9LAogICAgICBiaW5kRm9ybTogewoKICAgICAgfSwKICAgICAgLy8g6KGo5Y2V5qCh6aqMCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuWQjeensOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBubzogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIue8luWPt+S4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICB0eXBlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi57G75Z6L5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICAgIGNsYXNzcm9vbUlkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5pWZ5a6k5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICB9LAogICAgICBiaW5kUnVsZXM6IHsKICAgICAgICBkZXZpY2VJZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuiuvuWkh+S4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6LmoYzlrZDliJfooaggKi8KICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGxpc3REZXNrKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuZGVza0xpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CgogICAgICBsaXN0Q2xhc3Nyb29tKHtwYWdlU2l6ZTogMTAwfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5jbGFzc3Jvb21MaXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgfSk7CgogICAgICBsaXN0RGV2aWNlKHtwYWdlU2l6ZTogMTAwfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5kZXZpY2VMaXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgfSkKICAgIH0sCiAgICByb3dDbGljayhyb3csIGNvbHVtbiwgZXZlbnQpIHsKICAgICAgdGhpcy4kcmVmcy5kYXRhVGFibGUudG9nZ2xlUm93RXhwYW5zaW9uKHJvdykKICAgIH0sCiAgICAvLyDlj5bmtojmjInpkq4KICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy5vcGVuID0gZmFsc2U7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgIH0sCiAgICBjYW5jZWxCaW5kKCkgewogICAgICB0aGlzLmJpbmRPcGVuID0gZmFsc2U7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgIH0sCiAgICAvLyDooajljZXph43nva4KICAgIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgbmFtZTogbnVsbCwKICAgICAgICBubzogbnVsbCwKICAgICAgICBjbGFzc3Jvb21JZDogbnVsbCwKICAgICAgICB0eXBlOiAxLAogICAgICAgIGNyZWF0ZVRpbWU6IG51bGwsCiAgICAgICAgdXBkYXRlVGltZTogbnVsbCwKICAgICAgICBjcmVhdGVVc2VySWQ6IG51bGwsCiAgICAgICAgdXBkYXRlVXNlcklkOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7CiAgICB9LAogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlUXVlcnkoKSB7CiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8KICAgIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGlvbikgewogICAgICB0aGlzLmlkcyA9IHNlbGVjdGlvbi5tYXAoaXRlbSA9PiBpdGVtLmlkKQogICAgICB0aGlzLnNpbmdsZSA9IHNlbGVjdGlvbi5sZW5ndGghPT0xCiAgICAgIHRoaXMubXVsdGlwbGUgPSAhc2VsZWN0aW9uLmxlbmd0aAogICAgfSwKICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gIua3u+WKoOahjOWtkCI7CiAgICB9LAogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlVXBkYXRlKHJvdykgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIGNvbnN0IGlkID0gcm93LmlkIHx8IHRoaXMuaWRzCiAgICAgIGdldERlc2soaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgICB0aGlzLnRpdGxlID0gIuS/ruaUueahjOWtkCI7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZURldmljZUJpbmQocm93KSB7CiAgICAgIHRoaXMuYmluZEZvcm0uZGVza05hbWUgPSByb3cubmFtZTsKICAgICAgdGhpcy5iaW5kRm9ybS5jbGFzc3Jvb21OYW1lID0gcm93LmNsYXNzcm9vbU5hbWU7CiAgICAgIHRoaXMuYmluZEZvcm0uY2xhc3Nyb29tSWQgPSByb3cuY2xhc3Nyb29tSWQ7CiAgICAgIHRoaXMuYmluZEZvcm0uZGVza0lkID0gcm93LmlkOwogICAgICB0aGlzLmJpbmRPcGVuID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVEZXZpY2VVbmJpbmQoY2xhc3Nyb29tSWQsIGRlc2tJZCwgZGV2aWNlSWQpIHsKICAgICAgdW5iaW5kRGV2aWNlKGNsYXNzcm9vbUlkLCBkZXNrSWQsIGRldmljZUlkKS50aGVuKHJlc3AgPT4gewogICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuino+e7keaIkOWKnyIpOwogICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtQmluZCgpIHsKICAgICAgdGhpcy4kcmVmc1snYmluZEZvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBiaW5kRGV2aWNlKHRoaXMuYmluZEZvcm0uZGVza0lkLCB0aGlzLmJpbmRGb3JtKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5iaW5kT3BlbiA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLnu5HlrprmiJDlip8iKTsKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDmj5DkuqTmjInpkq4gKi8KICAgIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhpcy5mb3JtLmlkICE9IG51bGwpIHsKICAgICAgICAgICAgdXBkYXRlRGVzayh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFkZERlc2sodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIGNvbnN0IGlkcyA9IHJvdy5pZCB8fCB0aGlzLmlkczsKICAgICAgdGhpcy4kbW9kYWwuY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5qGM5a2Q57yW5Y+35Li6IicgKyBpZHMgKyAnIueahOaVsOaNrumhue+8nycpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGRlbERlc2soaWRzKTsKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7CiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgIH0sCiAgICAvKiog5a+85Ye65oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVFeHBvcnQoKSB7CiAgICAgIHRoaXMuZG93bmxvYWQoJ3N5c3RlbS9kZXNrL2V4cG9ydCcsIHsKICAgICAgICAuLi50aGlzLnF1ZXJ5UGFyYW1zCiAgICAgIH0sIGBkZXNrXyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9Lnhsc3hgKQogICAgfQogIH0KfTsK"},{"version":3,"sources":["palace.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"palace.vue","sourceRoot":"src/views/system/palace","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n      <el-form-item label=\"桌子名称\" prop=\"name\">\n        <el-input\n          v-model=\"queryParams.name\"\n          placeholder=\"请输入桌子名称\"\n          clearable\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"桌子编号\" prop=\"no\">\n        <el-input\n          v-model=\"queryParams.no\"\n          placeholder=\"请输入桌子编号\"\n          clearable\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"primary\"\n          plain\n          icon=\"el-icon-plus\"\n          size=\"mini\"\n          @click=\"handleAdd\"\n          v-hasPermi=\"['system:palace:add']\"\n        >新增</el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"success\"\n          plain\n          icon=\"el-icon-edit\"\n          size=\"mini\"\n          :disabled=\"single\"\n          @click=\"handleUpdate\"\n          v-hasPermi=\"['system:palace:edit']\"\n        >修改</el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"danger\"\n          plain\n          icon=\"el-icon-delete\"\n          size=\"mini\"\n          :disabled=\"multiple\"\n          @click=\"handleDelete\"\n          v-hasPermi=\"['system:palace:remove']\"\n        >删除</el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"warning\"\n          plain\n          icon=\"el-icon-download\"\n          size=\"mini\"\n          @click=\"handleExport\"\n          v-hasPermi=\"['system:palace:export']\"\n        >导出</el-button>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n\n    <el-table ref=\"dataTable\" v-loading=\"loading\" :data=\"deskList\" @selection-change=\"handleSelectionChange\" @row-click=\"rowClick\">\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n      <el-table-column type=\"expand\">\n        <template slot-scope=\"props\">\n          <el-table v-loading=\"loading\" :data=\"props.row.deviceList\" >\n            <el-table-column label=\"设备编号\" align=\"center\" prop=\"no\" />\n            <el-table-column label=\"设备编号\" align=\"center\" prop=\"name\" />\n            <el-table-column label=\"类型\" align=\"center\" prop=\"type\" >\n              <template slot-scope=\"scope\">\n                <span v-if=\"scope.row.type == 'face'\">人脸</span>\n                <span v-if=\"scope.row.type == 'scene'\">场景</span>\n                <span v-if=\"scope.row.type == '360'\">全景</span>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"ip\" align=\"center\" prop=\"ip\" />\n            <el-table-column label=\"port\" align=\"center\" prop=\"port\" />\n            <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n              <template slot-scope=\"scope\">\n                <el-popconfirm\n                  title=\"确定解除绑定吗？\"\n                  @confirm=\"handleDeviceUnbind(props.row.classroomId, props.row.id, scope.row.id)\"\n                >\n                  <el-button\n                    slot=\"reference\"\n                    size=\"mini\"\n                    type=\"text\"\n                    icon=\"el-icon-delete\"\n                    v-hasPermi=\"['system:palace:edit']\"\n                  >解除绑定</el-button>\n                </el-popconfirm>\n              </template>\n            </el-table-column>\n          </el-table>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"ID\" align=\"center\" prop=\"id\" />\n      <el-table-column label=\"桌子名称\" align=\"center\" prop=\"name\" />\n      <el-table-column label=\"桌子编号\" align=\"center\" prop=\"no\" />\n      <el-table-column label=\"教室名称\" align=\"center\" prop=\"classroomName\" />\n      <el-table-column label=\"教室编号\" align=\"center\" prop=\"classroomNo\" />\n      <el-table-column label=\"桌子类型\" align=\"center\" prop=\"type\" >\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.type == 1 ? '老师':'学生'}}</span>\n        </template>\n      </el-table-column>\n      <!-- <el-table-column label=\"创建人\" align=\"center\" prop=\"createUserId\" />\n      <el-table-column label=\"更新人\" align=\"center\" prop=\"updateUserId\" /> -->\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-plus\"\n            @click=\"handleDeviceBind(scope.row)\"\n            v-hasPermi=\"['system:palace:edit']\"\n          >绑定设备</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-edit\"\n            @click=\"handleUpdate(scope.row)\"\n            v-hasPermi=\"['system:palace:edit']\"\n          >修改</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n            v-hasPermi=\"['system:palace:remove']\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n    <!-- 添加或修改桌子对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-form-item label=\"桌子名称\" prop=\"name\">\n          <el-input v-model=\"form.name\" placeholder=\"请输入桌子名称\" />\n        </el-form-item>\n        <el-form-item label=\"桌子编号\" prop=\"no\">\n          <el-input v-model=\"form.no\" placeholder=\"请输入桌子编号\" />\n        </el-form-item>\n        <el-form-item label=\"教室\" prop=\"classroomId\">\n          <el-select v-model=\"form.classroomId\" placeholder=\"请选择教室\" clearable>\n            <el-option\n              v-for=\"item in classroomList\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"桌子类型\" prop=\"type\">\n          <el-radio-group v-model=\"form.type\">\n            <el-radio :label=\"1\">教师桌子</el-radio>\n            <el-radio :label=\"2\">学生桌子</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"绑定设备\" :visible.sync=\"bindOpen\" width=\"500px\" append-to-body>\n      <el-form ref=\"bindForm\" :model=\"bindForm\" :rules=\"bindRules\" label-width=\"80px\">\n        <el-form-item label=\"桌子\" prop=\"deskName\">\n          <el-input v-model=\"bindForm.deskName\" placeholder=\"请输入桌子名称\" readonly/>\n        </el-form-item>\n        <el-form-item label=\"教室\" prop=\"classroomName\">\n          <el-input v-model=\"bindForm.classroomName\" placeholder=\"请输入桌子名称\" readonly/>\n        </el-form-item>\n        <el-form-item label=\"设备\" prop=\"deviceId\">\n          <el-select v-model=\"bindForm.deviceId\" placeholder=\"请选择设备\" clearable>\n            <el-option\n              v-for=\"item in deviceList\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n            />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirmBind\">确 定</el-button>\n        <el-button @click=\"cancelBind\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { listDesk, getDesk, delDesk, addDesk, updateDesk, bindDevice, unbindDevice } from \"@/api/system/palace\";\nimport { listDevice } from \"@/api/system/device\";\nimport { listClassroom, getClassroom, delClassroom, addClassroom, updateClassroom } from \"@/api/system/classroom\";\n\nexport default {\n  name: \"Desk\",\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 桌子表格数据\n      deskList: [],\n      classroomList:[],\n      deviceList: [],\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      bindOpen: false,\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        name: null,\n        no: null,\n        classroomId: null,\n        type: null,\n        createUserId: null,\n        updateUserId: null\n      },\n      // 表单参数\n      form: {\n        type: 1\n      },\n      bindForm: {\n\n      },\n      // 表单校验\n      rules: {\n        name: [\n          { required: true, message: \"名称不能为空\", trigger: \"blur\" }\n        ],\n        no: [\n          { required: true, message: \"编号不能为空\", trigger: \"blur\" }\n        ],\n        type: [\n          { required: true, message: \"类型不能为空\", trigger: \"blur\" }\n        ],\n        classroomId: [\n          { required: true, message: \"教室不能为空\", trigger: \"blur\" }\n        ],\n      },\n      bindRules: {\n        deviceId: [\n          { required: true, message: \"设备不能为空\", trigger: \"blur\" }\n        ],\n      }\n    };\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    /** 查询桌子列表 */\n    getList() {\n      this.loading = true;\n      listDesk(this.queryParams).then(response => {\n        this.deskList = response.rows;\n        this.total = response.total;\n        this.loading = false;\n      });\n\n      listClassroom({pageSize: 100}).then(response => {\n        this.classroomList = response.rows;\n      });\n\n      listDevice({pageSize: 100}).then(response => {\n        this.deviceList = response.rows;\n      })\n    },\n    rowClick(row, column, event) {\n      this.$refs.dataTable.toggleRowExpansion(row)\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    cancelBind() {\n      this.bindOpen = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: null,\n        name: null,\n        no: null,\n        classroomId: null,\n        type: 1,\n        createTime: null,\n        updateTime: null,\n        createUserId: null,\n        updateUserId: null\n      };\n      this.resetForm(\"form\");\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.id)\n      this.single = selection.length!==1\n      this.multiple = !selection.length\n    },\n    /** 新增按钮操作 */\n    handleAdd() {\n      this.reset();\n      this.open = true;\n      this.title = \"添加桌子\";\n    },\n    /** 修改按钮操作 */\n    handleUpdate(row) {\n      this.reset();\n      const id = row.id || this.ids\n      getDesk(id).then(response => {\n        this.form = response.data;\n        this.open = true;\n        this.title = \"修改桌子\";\n      });\n    },\n    handleDeviceBind(row) {\n      this.bindForm.deskName = row.name;\n      this.bindForm.classroomName = row.classroomName;\n      this.bindForm.classroomId = row.classroomId;\n      this.bindForm.deskId = row.id;\n      this.bindOpen = true;\n    },\n    handleDeviceUnbind(classroomId, deskId, deviceId) {\n      unbindDevice(classroomId, deskId, deviceId).then(resp => {\n        this.$modal.msgSuccess(\"解绑成功\");\n        this.getList();\n      });\n    },\n    confirmBind() {\n      this.$refs['bindForm'].validate(valid => {\n        if (valid) {\n          bindDevice(this.bindForm.deskId, this.bindForm).then(response => {\n            this.bindOpen = false;\n            this.$modal.msgSuccess(\"绑定成功\");\n            this.getList();\n          });\n        }\n      });\n    },\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != null) {\n            updateDesk(this.form).then(response => {\n              this.$modal.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getList();\n            });\n          } else {\n            addDesk(this.form).then(response => {\n              this.$modal.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getList();\n            });\n          }\n        }\n      });\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      const ids = row.id || this.ids;\n      this.$modal.confirm('是否确认删除桌子编号为\"' + ids + '\"的数据项？').then(function() {\n        return delDesk(ids);\n      }).then(() => {\n        this.getList();\n        this.$modal.msgSuccess(\"删除成功\");\n      }).catch(() => {});\n    },\n    /** 导出按钮操作 */\n    handleExport() {\n      this.download('system/desk/export', {\n        ...this.queryParams\n      }, `desk_${new Date().getTime()}.xlsx`)\n    }\n  }\n};\n</script>\n\n"]}]}