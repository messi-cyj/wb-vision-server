{"remainingRequest":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\wb-vision-server\\ruoyi-ui\\src\\views\\system\\palace\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\wb-vision-server\\ruoyi-ui\\src\\views\\system\\palace\\index.vue","mtime":1698221823659},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxpc3REZXNrLCBnZXREZXNrLCBkZWxEZXNrLCBhZGREZXNrLCB1cGRhdGVEZXNrLCBiaW5kRGV2aWNlLCB1bmJpbmREZXZpY2UgfSBmcm9tICJAL2FwaS9zeXN0ZW0vcGFsYWNlIjsKIGltcG9ydCB7IGxpc3REZXZpY2UgfSBmcm9tICJAL2FwaS9zeXN0ZW0vZGV2aWNlIjsKIGltcG9ydCB7IGxpc3RDbGFzc3Jvb20sIGdldENsYXNzcm9vbSwgZGVsQ2xhc3Nyb29tLCBhZGRDbGFzc3Jvb20sIHVwZGF0ZUNsYXNzcm9vbSB9IGZyb20gIkAvYXBpL3N5c3RlbS9jbGFzc3Jvb20iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXNrIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8vIOmAieS4reaVsOe7hAogICAgICBpZHM6IFtdLAogICAgICAvLyDpnZ7ljZXkuKrnpoHnlKgKICAgICAgc2luZ2xlOiB0cnVlLAogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgKICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOahjOWtkOihqOagvOaVsOaNrgogICAgICBkZXNrTGlzdDogW10sCiAgICAgIGNsYXNzcm9vbUxpc3Q6W10sCiAgICAgIGRldmljZUxpc3Q6IFtdLAogICAgICAvLyDlvLnlh7rlsYLmoIfpopgKICAgICAgdGl0bGU6ICIiLAogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYIKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIGJpbmRPcGVuOiBmYWxzZSwKICAgICAgLy8g5p+l6K+i5Y+C5pWwCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgbmFtZTogbnVsbCwKICAgICAgICBubzogbnVsbCwKICAgICAgICBjbGFzc3Jvb21JZDogbnVsbCwKICAgICAgICB0eXBlOiBudWxsLAogICAgICAgIGNyZWF0ZVVzZXJJZDogbnVsbCwKICAgICAgICB1cGRhdGVVc2VySWQ6IG51bGwKICAgICAgfSwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHsKICAgICAgICB0eXBlOiAxCiAgICAgIH0sCiAgICAgIGJpbmRGb3JtOiB7CgogICAgICB9LAogICAgICAvLyDooajljZXmoKHpqowKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5ZCN56ew5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICAgIG5vOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi57yW5Y+35LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICAgIHR5cGU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLnsbvlnovkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQogICAgICAgIF0sCiAgICAgICAgY2xhc3Nyb29tSWQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLmlZnlrqTkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGJpbmRSdWxlczogewogICAgICAgIGRldmljZUlkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K6+5aSH5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOafpeivouahjOWtkOWIl+ihqCAqLwogICAgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgbGlzdERlc2sodGhpcy5xdWVyeVBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5kZXNrTGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKCiAgICAgIGxpc3RDbGFzc3Jvb20oe3BhZ2VTaXplOiAxMDB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmNsYXNzcm9vbUxpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICB9KTsKCiAgICAgIGxpc3REZXZpY2Uoe3BhZ2VTaXplOiAxMDB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmRldmljZUxpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICB9KQogICAgfSwKICAgIHJvd0NsaWNrKHJvdywgY29sdW1uLCBldmVudCkgewogICAgICB0aGlzLiRyZWZzLmRhdGFUYWJsZS50b2dnbGVSb3dFeHBhbnNpb24ocm93KQogICAgfSwKICAgIC8vIOWPlua2iOaMiemSrgogICAgY2FuY2VsKCkgewogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIGNhbmNlbEJpbmQoKSB7CiAgICAgIHRoaXMuYmluZE9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBuYW1lOiBudWxsLAogICAgICAgIG5vOiBudWxsLAogICAgICAgIGNsYXNzcm9vbUlkOiBudWxsLAogICAgICAgIHR5cGU6IDEsCiAgICAgICAgY3JlYXRlVGltZTogbnVsbCwKICAgICAgICB1cGRhdGVUaW1lOiBudWxsLAogICAgICAgIGNyZWF0ZVVzZXJJZDogbnVsbCwKICAgICAgICB1cGRhdGVVc2VySWQ6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsKICAgIH0sCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLwogICAgcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0uaWQpCiAgICAgIHRoaXMuc2luZ2xlID0gc2VsZWN0aW9uLmxlbmd0aCE9PTEKICAgICAgdGhpcy5tdWx0aXBsZSA9ICFzZWxlY3Rpb24ubGVuZ3RoCiAgICB9LAogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlQWRkKCkgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICAgIHRoaXMudGl0bGUgPSAi5re75Yqg5qGM5a2QIjsKICAgIH0sCiAgICAvKiog5L+u5pS55oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVVcGRhdGUocm93KSB7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgY29uc3QgaWQgPSByb3cuaWQgfHwgdGhpcy5pZHMKICAgICAgZ2V0RGVzayhpZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5mb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICAgIHRoaXMudGl0bGUgPSAi5L+u5pS55qGM5a2QIjsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGV2aWNlQmluZChyb3cpIHsKICAgICAgdGhpcy5iaW5kRm9ybS5kZXNrTmFtZSA9IHJvdy5uYW1lOwogICAgICB0aGlzLmJpbmRGb3JtLmNsYXNzcm9vbU5hbWUgPSByb3cuY2xhc3Nyb29tTmFtZTsKICAgICAgdGhpcy5iaW5kRm9ybS5jbGFzc3Jvb21JZCA9IHJvdy5jbGFzc3Jvb21JZDsKICAgICAgdGhpcy5iaW5kRm9ybS5kZXNrSWQgPSByb3cuaWQ7CiAgICAgIHRoaXMuYmluZE9wZW4gPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZURldmljZVVuYmluZChjbGFzc3Jvb21JZCwgZGVza0lkLCBkZXZpY2VJZCkgewogICAgICB1bmJpbmREZXZpY2UoY2xhc3Nyb29tSWQsIGRlc2tJZCwgZGV2aWNlSWQpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi6Kej57uR5oiQ5YqfIik7CiAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNvbmZpcm1CaW5kKCkgewogICAgICB0aGlzLiRyZWZzWydiaW5kRm9ybSddLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGJpbmREZXZpY2UodGhpcy5iaW5kRm9ybS5kZXNrSWQsIHRoaXMuYmluZEZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmJpbmRPcGVuID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIue7keWumuaIkOWKnyIpOwogICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLyoqIOaPkOS6pOaMiemSriAqLwogICAgc3VibWl0Rm9ybSgpIHsKICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICh0aGlzLmZvcm0uaWQgIT0gbnVsbCkgewogICAgICAgICAgICB1cGRhdGVEZXNrKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWRkRGVzayh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOwogICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgY29uc3QgaWRzID0gcm93LmlkIHx8IHRoaXMuaWRzOwogICAgICB0aGlzLiRtb2RhbC5jb25maXJtKCfmmK/lkKbnoa7orqTliKDpmaTmoYzlrZDnvJblj7fkuLoiJyArIGlkcyArICci55qE5pWw5o2u6aG577yfJykudGhlbihmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gZGVsRGVzayhpZHMpOwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgfSkuY2F0Y2goKCkgPT4ge30pOwogICAgfSwKICAgIC8qKiDlr7zlh7rmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZUV4cG9ydCgpIHsKICAgICAgdGhpcy5kb3dubG9hZCgnc3lzdGVtL2Rlc2svZXhwb3J0JywgewogICAgICAgIC4uLnRoaXMucXVlcnlQYXJhbXMKICAgICAgfSwgYGRlc2tfJHtuZXcgRGF0ZSgpLmdldFRpbWUoKX0ueGxzeGApCiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/palace","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n      <el-form-item label=\"桌子名称\" prop=\"name\">\n        <el-input\n          v-model=\"queryParams.name\"\n          placeholder=\"请输入桌子名称\"\n          clearable\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"桌子编号\" prop=\"no\">\n        <el-input\n          v-model=\"queryParams.no\"\n          placeholder=\"请输入桌子编号\"\n          clearable\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"primary\"\n          plain\n          icon=\"el-icon-plus\"\n          size=\"mini\"\n          @click=\"handleAdd\"\n          v-hasPermi=\"['system:palace:add']\"\n        >新增</el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"success\"\n          plain\n          icon=\"el-icon-edit\"\n          size=\"mini\"\n          :disabled=\"single\"\n          @click=\"handleUpdate\"\n          v-hasPermi=\"['system:palace:edit']\"\n        >修改</el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"danger\"\n          plain\n          icon=\"el-icon-delete\"\n          size=\"mini\"\n          :disabled=\"multiple\"\n          @click=\"handleDelete\"\n          v-hasPermi=\"['system:palace:remove']\"\n        >删除</el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"warning\"\n          plain\n          icon=\"el-icon-download\"\n          size=\"mini\"\n          @click=\"handleExport\"\n          v-hasPermi=\"['system:palace:export']\"\n        >导出</el-button>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n\n    <el-table ref=\"dataTable\" v-loading=\"loading\" :data=\"deskList\" @selection-change=\"handleSelectionChange\" @row-click=\"rowClick\">\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n      <el-table-column type=\"expand\">\n        <template slot-scope=\"props\">\n          <el-table v-loading=\"loading\" :data=\"props.row.deviceList\" >\n            <el-table-column label=\"设备编号\" align=\"center\" prop=\"no\" />\n            <el-table-column label=\"设备编号\" align=\"center\" prop=\"name\" />\n            <el-table-column label=\"类型\" align=\"center\" prop=\"type\" >\n              <template slot-scope=\"scope\">\n                <span v-if=\"scope.row.type == 'face'\">人脸</span>\n                <span v-if=\"scope.row.type == 'scene'\">场景</span>\n                <span v-if=\"scope.row.type == '360'\">全景</span>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"ip\" align=\"center\" prop=\"ip\" />\n            <el-table-column label=\"port\" align=\"center\" prop=\"port\" />\n            <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n              <template slot-scope=\"scope\">\n                <el-popconfirm\n                  title=\"确定解除绑定吗？\"\n                  @confirm=\"handleDeviceUnbind(props.row.classroomId, props.row.id, scope.row.id)\"\n                >\n                  <el-button\n                    slot=\"reference\"\n                    size=\"mini\"\n                    type=\"text\"\n                    icon=\"el-icon-delete\"\n                    v-hasPermi=\"['system:palace:edit']\"\n                  >解除绑定</el-button>\n                </el-popconfirm>\n              </template>\n            </el-table-column>\n          </el-table>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"ID\" align=\"center\" prop=\"id\" />\n      <el-table-column label=\"桌子名称\" align=\"center\" prop=\"name\" />\n      <el-table-column label=\"桌子编号\" align=\"center\" prop=\"no\" />\n      <el-table-column label=\"教室名称\" align=\"center\" prop=\"classroomName\" />\n      <el-table-column label=\"教室编号\" align=\"center\" prop=\"classroomNo\" />\n      <el-table-column label=\"桌子类型\" align=\"center\" prop=\"type\" >\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.type == 1 ? '老师':'学生'}}</span>\n        </template>\n      </el-table-column>\n      <!-- <el-table-column label=\"创建人\" align=\"center\" prop=\"createUserId\" />\n      <el-table-column label=\"更新人\" align=\"center\" prop=\"updateUserId\" /> -->\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-plus\"\n            @click=\"handleDeviceBind(scope.row)\"\n            v-hasPermi=\"['system:desk:edit']\"\n          >绑定设备</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-edit\"\n            @click=\"handleUpdate(scope.row)\"\n            v-hasPermi=\"['system:desk:edit']\"\n          >修改</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n            v-hasPermi=\"['system:palace:remove']\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n    <!-- 添加或修改桌子对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-form-item label=\"桌子名称\" prop=\"name\">\n          <el-input v-model=\"form.name\" placeholder=\"请输入桌子名称\" />\n        </el-form-item>\n        <el-form-item label=\"桌子编号\" prop=\"no\">\n          <el-input v-model=\"form.no\" placeholder=\"请输入桌子编号\" />\n        </el-form-item>\n        <el-form-item label=\"教室\" prop=\"classroomId\">\n          <el-select v-model=\"form.classroomId\" placeholder=\"请选择教室\" clearable>\n            <el-option\n              v-for=\"item in classroomList\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"桌子类型\" prop=\"type\">\n          <el-radio-group v-model=\"form.type\">\n            <el-radio :label=\"1\">教师桌子</el-radio>\n            <el-radio :label=\"2\">学生桌子</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"绑定设备\" :visible.sync=\"bindOpen\" width=\"500px\" append-to-body>\n      <el-form ref=\"bindForm\" :model=\"bindForm\" :rules=\"bindRules\" label-width=\"80px\">\n        <el-form-item label=\"桌子\" prop=\"deskName\">\n          <el-input v-model=\"bindForm.deskName\" placeholder=\"请输入桌子名称\" readonly/>\n        </el-form-item>\n        <el-form-item label=\"教室\" prop=\"classroomName\">\n          <el-input v-model=\"bindForm.classroomName\" placeholder=\"请输入桌子名称\" readonly/>\n        </el-form-item>\n        <el-form-item label=\"设备\" prop=\"deviceId\">\n          <el-select v-model=\"bindForm.deviceId\" placeholder=\"请选择设备\" clearable>\n            <el-option\n              v-for=\"item in deviceList\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n            />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirmBind\">确 定</el-button>\n        <el-button @click=\"cancelBind\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { listDesk, getDesk, delDesk, addDesk, updateDesk, bindDevice, unbindDevice } from \"@/api/system/palace\";\n import { listDevice } from \"@/api/system/device\";\n import { listClassroom, getClassroom, delClassroom, addClassroom, updateClassroom } from \"@/api/system/classroom\";\n\nexport default {\n  name: \"Desk\",\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 桌子表格数据\n      deskList: [],\n      classroomList:[],\n      deviceList: [],\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      bindOpen: false,\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        name: null,\n        no: null,\n        classroomId: null,\n        type: null,\n        createUserId: null,\n        updateUserId: null\n      },\n      // 表单参数\n      form: {\n        type: 1\n      },\n      bindForm: {\n\n      },\n      // 表单校验\n      rules: {\n        name: [\n          { required: true, message: \"名称不能为空\", trigger: \"blur\" }\n        ],\n        no: [\n          { required: true, message: \"编号不能为空\", trigger: \"blur\" }\n        ],\n        type: [\n          { required: true, message: \"类型不能为空\", trigger: \"blur\" }\n        ],\n        classroomId: [\n          { required: true, message: \"教室不能为空\", trigger: \"blur\" }\n        ],\n      },\n      bindRules: {\n        deviceId: [\n          { required: true, message: \"设备不能为空\", trigger: \"blur\" }\n        ],\n      }\n    };\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    /** 查询桌子列表 */\n    getList() {\n      this.loading = true;\n      listDesk(this.queryParams).then(response => {\n        this.deskList = response.rows;\n        this.total = response.total;\n        this.loading = false;\n      });\n\n      listClassroom({pageSize: 100}).then(response => {\n        this.classroomList = response.rows;\n      });\n\n      listDevice({pageSize: 100}).then(response => {\n        this.deviceList = response.rows;\n      })\n    },\n    rowClick(row, column, event) {\n      this.$refs.dataTable.toggleRowExpansion(row)\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    cancelBind() {\n      this.bindOpen = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: null,\n        name: null,\n        no: null,\n        classroomId: null,\n        type: 1,\n        createTime: null,\n        updateTime: null,\n        createUserId: null,\n        updateUserId: null\n      };\n      this.resetForm(\"form\");\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.id)\n      this.single = selection.length!==1\n      this.multiple = !selection.length\n    },\n    /** 新增按钮操作 */\n    handleAdd() {\n      this.reset();\n      this.open = true;\n      this.title = \"添加桌子\";\n    },\n    /** 修改按钮操作 */\n    handleUpdate(row) {\n      this.reset();\n      const id = row.id || this.ids\n      getDesk(id).then(response => {\n        this.form = response.data;\n        this.open = true;\n        this.title = \"修改桌子\";\n      });\n    },\n    handleDeviceBind(row) {\n      this.bindForm.deskName = row.name;\n      this.bindForm.classroomName = row.classroomName;\n      this.bindForm.classroomId = row.classroomId;\n      this.bindForm.deskId = row.id;\n      this.bindOpen = true;\n    },\n    handleDeviceUnbind(classroomId, deskId, deviceId) {\n      unbindDevice(classroomId, deskId, deviceId).then(resp => {\n        this.$modal.msgSuccess(\"解绑成功\");\n        this.getList();\n      });\n    },\n    confirmBind() {\n      this.$refs['bindForm'].validate(valid => {\n        if (valid) {\n          bindDevice(this.bindForm.deskId, this.bindForm).then(response => {\n            this.bindOpen = false;\n            this.$modal.msgSuccess(\"绑定成功\");\n            this.getList();\n          });\n        }\n      });\n    },\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != null) {\n            updateDesk(this.form).then(response => {\n              this.$modal.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getList();\n            });\n          } else {\n            addDesk(this.form).then(response => {\n              this.$modal.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getList();\n            });\n          }\n        }\n      });\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      const ids = row.id || this.ids;\n      this.$modal.confirm('是否确认删除桌子编号为\"' + ids + '\"的数据项？').then(function() {\n        return delDesk(ids);\n      }).then(() => {\n        this.getList();\n        this.$modal.msgSuccess(\"删除成功\");\n      }).catch(() => {});\n    },\n    /** 导出按钮操作 */\n    handleExport() {\n      this.download('system/desk/export', {\n        ...this.queryParams\n      }, `desk_${new Date().getTime()}.xlsx`)\n    }\n  }\n};\n</script>\n"]}]}