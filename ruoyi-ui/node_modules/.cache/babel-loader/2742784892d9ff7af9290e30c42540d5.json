{"remainingRequest":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!G:\\wb-vision-server\\ruoyi-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!G:\\wb-vision-server\\ruoyi-ui\\src\\utils\\request.js","dependencies":[{"path":"G:\\wb-vision-server\\ruoyi-ui\\src\\utils\\request.js","mtime":1679144980000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\babel.config.js","mtime":1679144980000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"G:\\wb-vision-server\\ruoyi-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJHOi93Yi12aXNpb24tc2VydmVyL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpleHBvcnRzLmRvd25sb2FkID0gZG93bmxvYWQ7CmV4cG9ydHMuaXNSZWxvZ2luID0gdm9pZCAwOwp2YXIgX3JlZ2VuZXJhdG9yUnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkc6L3diLXZpc2lvbi1zZXJ2ZXIvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvcmVnZW5lcmF0b3JSdW50aW1lLmpzIikpOwp2YXIgX2FzeW5jVG9HZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJHOi93Yi12aXNpb24tc2VydmVyL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiKSk7CnZhciBfdHlwZW9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRzovd2ItdmlzaW9uLXNlcnZlci9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMiKSk7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIik7CnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwp2YXIgX2VsZW1lbnRVaSA9IHJlcXVpcmUoImVsZW1lbnQtdWkiKTsKdmFyIF9zdG9yZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9zdG9yZSIpKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7CnZhciBfZXJyb3JDb2RlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3V0aWxzL2Vycm9yQ29kZSIpKTsKdmFyIF9ydW95aSA9IHJlcXVpcmUoIkAvdXRpbHMvcnVveWkiKTsKdmFyIF9jYWNoZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9wbHVnaW5zL2NhY2hlIikpOwp2YXIgX2ZpbGVTYXZlciA9IHJlcXVpcmUoImZpbGUtc2F2ZXIiKTsKdmFyIGRvd25sb2FkTG9hZGluZ0luc3RhbmNlOwovLyDmmK/lkKbmmL7npLrph43mlrDnmbvlvZUKdmFyIGlzUmVsb2dpbiA9IGV4cG9ydHMuaXNSZWxvZ2luID0gewogIHNob3c6IGZhbHNlCn07Cl9heGlvcy5kZWZhdWx0LmRlZmF1bHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCc7Ci8vIOWIm+W7umF4aW9z5a6e5L6LCnZhciBzZXJ2aWNlID0gX2F4aW9zLmRlZmF1bHQuY3JlYXRlKHsKICAvLyBheGlvc+S4reivt+axgumFjee9ruaciWJhc2VVUkzpgInpobnvvIzooajnpLror7fmsYJVUkzlhazlhbHpg6jliIYKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIC8vIOi2heaXtgogIHRpbWVvdXQ6IDEwMDAwCn0pOwoKLy8gcmVxdWVzdOaLpuaIquWZqApzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8g5piv5ZCm6ZyA6KaB6K6+572uIHRva2VuCiAgdmFyIGlzVG9rZW4gPSAoY29uZmlnLmhlYWRlcnMgfHwge30pLmlzVG9rZW4gPT09IGZhbHNlOwogIC8vIOaYr+WQpumcgOimgemYsuatouaVsOaNrumHjeWkjeaPkOS6pAogIHZhciBpc1JlcGVhdFN1Ym1pdCA9IChjb25maWcuaGVhZGVycyB8fCB7fSkucmVwZWF0U3VibWl0ID09PSBmYWxzZTsKICBpZiAoKDAsIF9hdXRoLmdldFRva2VuKSgpICYmICFpc1Rva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgKDAsIF9hdXRoLmdldFRva2VuKSgpOyAvLyDorqnmr4/kuKror7fmsYLmkLrluKboh6rlrprkuYl0b2tlbiDor7fmoLnmja7lrp7pmYXmg4XlhrXoh6rooYzkv67mlLkKICB9CiAgLy8gZ2V06K+35rGC5pig5bCEcGFyYW1z5Y+C5pWwCiAgaWYgKGNvbmZpZy5tZXRob2QgPT09ICdnZXQnICYmIGNvbmZpZy5wYXJhbXMpIHsKICAgIHZhciB1cmwgPSBjb25maWcudXJsICsgJz8nICsgKDAsIF9ydW95aS50YW5zUGFyYW1zKShjb25maWcucGFyYW1zKTsKICAgIHVybCA9IHVybC5zbGljZSgwLCAtMSk7CiAgICBjb25maWcucGFyYW1zID0ge307CiAgICBjb25maWcudXJsID0gdXJsOwogIH0KICBpZiAoIWlzUmVwZWF0U3VibWl0ICYmIChjb25maWcubWV0aG9kID09PSAncG9zdCcgfHwgY29uZmlnLm1ldGhvZCA9PT0gJ3B1dCcpKSB7CiAgICB2YXIgcmVxdWVzdE9iaiA9IHsKICAgICAgdXJsOiBjb25maWcudXJsLAogICAgICBkYXRhOiAoMCwgX3R5cGVvZjIuZGVmYXVsdCkoY29uZmlnLmRhdGEpID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KGNvbmZpZy5kYXRhKSA6IGNvbmZpZy5kYXRhLAogICAgICB0aW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgfTsKICAgIHZhciBzZXNzaW9uT2JqID0gX2NhY2hlLmRlZmF1bHQuc2Vzc2lvbi5nZXRKU09OKCdzZXNzaW9uT2JqJyk7CiAgICBpZiAoc2Vzc2lvbk9iaiA9PT0gdW5kZWZpbmVkIHx8IHNlc3Npb25PYmogPT09IG51bGwgfHwgc2Vzc2lvbk9iaiA9PT0gJycpIHsKICAgICAgX2NhY2hlLmRlZmF1bHQuc2Vzc2lvbi5zZXRKU09OKCdzZXNzaW9uT2JqJywgcmVxdWVzdE9iaik7CiAgICB9IGVsc2UgewogICAgICB2YXIgc191cmwgPSBzZXNzaW9uT2JqLnVybDsgLy8g6K+35rGC5Zyw5Z2ACiAgICAgIHZhciBzX2RhdGEgPSBzZXNzaW9uT2JqLmRhdGE7IC8vIOivt+axguaVsOaNrgogICAgICB2YXIgc190aW1lID0gc2Vzc2lvbk9iai50aW1lOyAvLyDor7fmsYLml7bpl7QKICAgICAgdmFyIGludGVydmFsID0gMTAwMDsgLy8g6Ze06ZqU5pe26Ze0KG1zKe+8jOWwj+S6juatpOaXtumXtOinhuS4uumHjeWkjeaPkOS6pAogICAgICBpZiAoc19kYXRhID09PSByZXF1ZXN0T2JqLmRhdGEgJiYgcmVxdWVzdE9iai50aW1lIC0gc190aW1lIDwgaW50ZXJ2YWwgJiYgc191cmwgPT09IHJlcXVlc3RPYmoudXJsKSB7CiAgICAgICAgdmFyIG1lc3NhZ2UgPSAn5pWw5o2u5q2j5Zyo5aSE55CG77yM6K+35Yu/6YeN5aSN5o+Q5LqkJzsKICAgICAgICBjb25zb2xlLndhcm4oIlsiLmNvbmNhdChzX3VybCwgIl06ICIpICsgbWVzc2FnZSk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihtZXNzYWdlKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2NhY2hlLmRlZmF1bHQuc2Vzc2lvbi5zZXRKU09OKCdzZXNzaW9uT2JqJywgcmVxdWVzdE9iaik7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coZXJyb3IpOwogIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CgovLyDlk43lupTmi6bmiKrlmagKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICAvLyDmnKrorr7nva7nirbmgIHnoIHliJnpu5jorqTmiJDlip/nirbmgIEKICB2YXIgY29kZSA9IHJlcy5kYXRhLmNvZGUgfHwgMjAwOwogIC8vIOiOt+WPlumUmeivr+S/oeaBrwogIHZhciBtc2cgPSBfZXJyb3JDb2RlLmRlZmF1bHRbY29kZV0gfHwgcmVzLmRhdGEubXNnIHx8IF9lcnJvckNvZGUuZGVmYXVsdFsnZGVmYXVsdCddOwogIC8vIOS6jOi/m+WItuaVsOaNruWImeebtOaOpei/lOWbngogIGlmIChyZXMucmVxdWVzdC5yZXNwb25zZVR5cGUgPT09ICdibG9iJyB8fCByZXMucmVxdWVzdC5yZXNwb25zZVR5cGUgPT09ICdhcnJheWJ1ZmZlcicpIHsKICAgIHJldHVybiByZXMuZGF0YTsKICB9CiAgaWYgKGNvZGUgPT09IDQwMSkgewogICAgaWYgKCFpc1JlbG9naW4uc2hvdykgewogICAgICBpc1JlbG9naW4uc2hvdyA9IHRydWU7CiAgICAgIF9lbGVtZW50VWkuTWVzc2FnZUJveC5jb25maXJtKCfnmbvlvZXnirbmgIHlt7Lov4fmnJ/vvIzmgqjlj6/ku6Xnu6fnu63nlZnlnKjor6XpobXpnaLvvIzmiJbogIXph43mlrDnmbvlvZUnLCAn57O757uf5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn6YeN5paw55m75b2VJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgaXNSZWxvZ2luLnNob3cgPSBmYWxzZTsKICAgICAgICBfc3RvcmUuZGVmYXVsdC5kaXNwYXRjaCgnTG9nT3V0JykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJy9pbmRleCc7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBpc1JlbG9naW4uc2hvdyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgn5peg5pWI55qE5Lya6K+d77yM5oiW6ICF5Lya6K+d5bey6L+H5pyf77yM6K+36YeN5paw55m75b2V44CCJyk7CiAgfSBlbHNlIGlmIChjb2RlID09PSA1MDApIHsKICAgICgwLCBfZWxlbWVudFVpLk1lc3NhZ2UpKHsKICAgICAgbWVzc2FnZTogbXNnLAogICAgICB0eXBlOiAnZXJyb3InCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IobXNnKSk7CiAgfSBlbHNlIGlmIChjb2RlICE9PSAyMDApIHsKICAgIF9lbGVtZW50VWkuTm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgdGl0bGU6IG1zZwogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ2Vycm9yJyk7CiAgfSBlbHNlIHsKICAgIHJldHVybiByZXMuZGF0YTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCdlcnInICsgZXJyb3IpOwogIHZhciBtZXNzYWdlID0gZXJyb3IubWVzc2FnZTsKICBpZiAobWVzc2FnZSA9PSAiTmV0d29yayBFcnJvciIpIHsKICAgIG1lc3NhZ2UgPSAi5ZCO56uv5o6l5Y+j6L+e5o6l5byC5bi4IjsKICB9IGVsc2UgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoInRpbWVvdXQiKSkgewogICAgbWVzc2FnZSA9ICLns7vnu5/mjqXlj6Por7fmsYLotoXml7YiOwogIH0gZWxzZSBpZiAobWVzc2FnZS5pbmNsdWRlcygiUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSIpKSB7CiAgICBtZXNzYWdlID0gIuezu+e7n+aOpeWPoyIgKyBtZXNzYWdlLnN1YnN0cihtZXNzYWdlLmxlbmd0aCAtIDMpICsgIuW8guW4uCI7CiAgfQogICgwLCBfZWxlbWVudFVpLk1lc3NhZ2UpKHsKICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICB0eXBlOiAnZXJyb3InLAogICAgZHVyYXRpb246IDUgKiAxMDAwCiAgfSk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CgovLyDpgJrnlKjkuIvovb3mlrnms5UKZnVuY3Rpb24gZG93bmxvYWQodXJsLCBwYXJhbXMsIGZpbGVuYW1lKSB7CiAgZG93bmxvYWRMb2FkaW5nSW5zdGFuY2UgPSBfZWxlbWVudFVpLkxvYWRpbmcuc2VydmljZSh7CiAgICB0ZXh0OiAi5q2j5Zyo5LiL6L295pWw5o2u77yM6K+356iN5YCZIiwKICAgIHNwaW5uZXI6ICJlbC1pY29uLWxvYWRpbmciLAogICAgYmFja2dyb3VuZDogInJnYmEoMCwgMCwgMCwgMC43KSIKICB9KTsKICByZXR1cm4gc2VydmljZS5wb3N0KHVybCwgcGFyYW1zLCB7CiAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gKHBhcmFtcykgewogICAgICByZXR1cm4gKDAsIF9ydW95aS50YW5zUGFyYW1zKShwYXJhbXMpOwogICAgfV0sCiAgICBoZWFkZXJzOiB7CiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgfSwKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InCiAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qLygwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShkYXRhKSB7CiAgICAgIHZhciBpc0xvZ2luLCBibG9iLCByZXNUZXh0LCByc3BPYmosIGVyck1zZzsKICAgICAgcmV0dXJuICgwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuICgwLCBfcnVveWkuYmxvYlZhbGlkYXRlKShkYXRhKTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaXNMb2dpbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGlmICghaXNMb2dpbikgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJsb2IgPSBuZXcgQmxvYihbZGF0YV0pOwogICAgICAgICAgICAoMCwgX2ZpbGVTYXZlci5zYXZlQXMpKGJsb2IsIGZpbGVuYW1lKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICByZXR1cm4gZGF0YS50ZXh0KCk7CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICByZXNUZXh0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcnNwT2JqID0gSlNPTi5wYXJzZShyZXNUZXh0KTsKICAgICAgICAgICAgZXJyTXNnID0gX2Vycm9yQ29kZS5kZWZhdWx0W3JzcE9iai5jb2RlXSB8fCByc3BPYmoubXNnIHx8IF9lcnJvckNvZGUuZGVmYXVsdFsnZGVmYXVsdCddOwogICAgICAgICAgICBfZWxlbWVudFVpLk1lc3NhZ2UuZXJyb3IoZXJyTXNnKTsKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGRvd25sb2FkTG9hZGluZ0luc3RhbmNlLmNsb3NlKCk7CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwogICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChyKSB7CiAgICBjb25zb2xlLmVycm9yKHIpOwogICAgX2VsZW1lbnRVaS5NZXNzYWdlLmVycm9yKCfkuIvovb3mlofku7blh7rnjrDplJnor6/vvIzor7fogZTns7vnrqHnkIblkZjvvIEnKTsKICAgIGRvd25sb2FkTG9hZGluZ0luc3RhbmNlLmNsb3NlKCk7CiAgfSk7Cn0KdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gc2VydmljZTs="},{"version":3,"names":["_axios","_interopRequireDefault","require","_elementUi","_store","_auth","_errorCode","_ruoyi","_cache","_fileSaver","downloadLoadingInstance","isRelogin","exports","show","axios","defaults","headers","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","isToken","isRepeatSubmit","repeatSubmit","getToken","method","params","url","tansParams","slice","requestObj","data","_typeof2","default","JSON","stringify","time","Date","getTime","sessionObj","cache","session","getJSON","undefined","setJSON","s_url","s_data","s_time","interval","message","console","warn","concat","Promise","reject","Error","error","log","response","res","code","msg","errorCode","responseType","MessageBox","confirm","confirmButtonText","cancelButtonText","type","then","store","dispatch","location","href","catch","Message","Notification","title","includes","substr","length","duration","download","filename","Loading","text","spinner","background","post","transformRequest","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","isLogin","blob","resText","rspObj","errMsg","wrap","_callee$","_context","prev","next","blobValidate","sent","Blob","saveAs","parse","close","stop","_x","apply","arguments","r","_default"],"sources":["G:/wb-vision-server/ruoyi-ui/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\nimport { Notification, MessageBox, Message, Loading } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\nimport errorCode from '@/utils/errorCode'\nimport { tansParams, blobValidate } from \"@/utils/ruoyi\";\nimport cache from '@/plugins/cache'\nimport { saveAs } from 'file-saver'\n\nlet downloadLoadingInstance;\n// 是否显示重新登录\nexport let isRelogin = { show: false };\n\naxios.defaults.headers['Content-Type'] = 'application/json;charset=utf-8'\n// 创建axios实例\nconst service = axios.create({\n  // axios中请求配置有baseURL选项，表示请求URL公共部分\n  baseURL: process.env.VUE_APP_BASE_API,\n  // 超时\n  timeout: 10000\n})\n\n// request拦截器\nservice.interceptors.request.use(config => {\n  // 是否需要设置 token\n  const isToken = (config.headers || {}).isToken === false\n  // 是否需要防止数据重复提交\n  const isRepeatSubmit = (config.headers || {}).repeatSubmit === false\n  if (getToken() && !isToken) {\n    config.headers['Authorization'] = 'Bearer ' + getToken() // 让每个请求携带自定义token 请根据实际情况自行修改\n  }\n  // get请求映射params参数\n  if (config.method === 'get' && config.params) {\n    let url = config.url + '?' + tansParams(config.params);\n    url = url.slice(0, -1);\n    config.params = {};\n    config.url = url;\n  }\n  if (!isRepeatSubmit && (config.method === 'post' || config.method === 'put')) {\n    const requestObj = {\n      url: config.url,\n      data: typeof config.data === 'object' ? JSON.stringify(config.data) : config.data,\n      time: new Date().getTime()\n    }\n    const sessionObj = cache.session.getJSON('sessionObj')\n    if (sessionObj === undefined || sessionObj === null || sessionObj === '') {\n      cache.session.setJSON('sessionObj', requestObj)\n    } else {\n      const s_url = sessionObj.url;                  // 请求地址\n      const s_data = sessionObj.data;                // 请求数据\n      const s_time = sessionObj.time;                // 请求时间\n      const interval = 1000;                         // 间隔时间(ms)，小于此时间视为重复提交\n      if (s_data === requestObj.data && requestObj.time - s_time < interval && s_url === requestObj.url) {\n        const message = '数据正在处理，请勿重复提交';\n        console.warn(`[${s_url}]: ` + message)\n        return Promise.reject(new Error(message))\n      } else {\n        cache.session.setJSON('sessionObj', requestObj)\n      }\n    }\n  }\n  return config\n}, error => {\n    console.log(error)\n    Promise.reject(error)\n})\n\n// 响应拦截器\nservice.interceptors.response.use(res => {\n    // 未设置状态码则默认成功状态\n    const code = res.data.code || 200;\n    // 获取错误信息\n    const msg = errorCode[code] || res.data.msg || errorCode['default']\n    // 二进制数据则直接返回\n    if(res.request.responseType ===  'blob' || res.request.responseType ===  'arraybuffer'){\n      return res.data\n    }\n    if (code === 401) {\n      if (!isRelogin.show) {\n        isRelogin.show = true;\n        MessageBox.confirm('登录状态已过期，您可以继续留在该页面，或者重新登录', '系统提示', {\n          confirmButtonText: '重新登录',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).then(() => {\n        isRelogin.show = false;\n        store.dispatch('LogOut').then(() => {\n          location.href = '/index';\n        })\n      }).catch(() => {\n        isRelogin.show = false;\n      });\n    }\n      return Promise.reject('无效的会话，或者会话已过期，请重新登录。')\n    } else if (code === 500) {\n      Message({\n        message: msg,\n        type: 'error'\n      })\n      return Promise.reject(new Error(msg))\n    } else if (code !== 200) {\n      Notification.error({\n        title: msg\n      })\n      return Promise.reject('error')\n    } else {\n      return res.data\n    }\n  },\n  error => {\n    console.log('err' + error)\n    let { message } = error;\n    if (message == \"Network Error\") {\n      message = \"后端接口连接异常\";\n    }\n    else if (message.includes(\"timeout\")) {\n      message = \"系统接口请求超时\";\n    }\n    else if (message.includes(\"Request failed with status code\")) {\n      message = \"系统接口\" + message.substr(message.length - 3) + \"异常\";\n    }\n    Message({\n      message: message,\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\n\n// 通用下载方法\nexport function download(url, params, filename) {\n  downloadLoadingInstance = Loading.service({ text: \"正在下载数据，请稍候\", spinner: \"el-icon-loading\", background: \"rgba(0, 0, 0, 0.7)\", })\n  return service.post(url, params, {\n    transformRequest: [(params) => { return tansParams(params) }],\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n    responseType: 'blob'\n  }).then(async (data) => {\n    const isLogin = await blobValidate(data);\n    if (isLogin) {\n      const blob = new Blob([data])\n      saveAs(blob, filename)\n    } else {\n      const resText = await data.text();\n      const rspObj = JSON.parse(resText);\n      const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default']\n      Message.error(errMsg);\n    }\n    downloadLoadingInstance.close();\n  }).catch((r) => {\n    console.error(r)\n    Message.error('下载文件出现错误，请联系管理员！')\n    downloadLoadingInstance.close();\n  })\n}\n\nexport default service\n"],"mappings":"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"}]}